<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IOE K9 SỐ: 02</title>
    <!-- Libraries from CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
      body { font-family: 'Nunito', sans-serif; }
      
      /* Custom Scrollbar */
      .custom-scrollbar::-webkit-scrollbar { width: 8px; }
      .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
      .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
      .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
      
      /* Simple Animations */
      @keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }
      .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
      
      @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
      .animate-slide-up { animation: slideUp 0.4s ease-out forwards; }

      @keyframes bounceShort { 
        0%, 100% { transform: translateY(0); } 
        50% { transform: translateY(-5px); } 
      }
      .animate-bounce-short { animation: bounceShort 1s infinite; }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/"
  }
}
</script>
</head>
<body class="bg-slate-100 text-slate-800 antialiased">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- 1. TYPES & ENUMS ---
        const QuestionType = {
            MULTIPLE_CHOICE: 'MULTIPLE_CHOICE',
            FILL_IN_BLANK: 'FILL_IN_BLANK',
            REARRANGE: 'REARRANGE'
        };

        const GameState = {
            START: 'START',
            PLAYING: 'PLAYING',
            FINISHED: 'FINISHED'
        };

        // --- 2. CONSTANTS & DATA ---
        const cleanUrl = (url) => {
            if (!url) return undefined;
            return url.trim()
                .replace(/\s+/g, '')
                .replace(/res\.ioe\.vnzedu/, 'res.ioe.vn/edu')
                .replace(/res\.ioe\.vii/, 'res.ioe.vn')
                .replace(/res\.ioe\.vm/, 'res.ioe.vn')
                .replace(/Audio\s*mp3/i, 'Audio.mp3')
                .replace(/ImageExam\s*(\d)/, 'ImageExam/$1')
                .replace(/Olympic\s*ExamData/, 'OlympicExamData')
                .replace(/EOlympic\s*ExamData/, 'EOlympic/ExamData')
                .replace(/'/g, '')
                .replace(/Audio-mp3/i, 'Audio.mp3');
        };

        // Full Question Data for IOE K9 No. 02
        const QUIZ_DATA = [
  { id: 1, type: QuestionType.MULTIPLE_CHOICE, questionText: "How will the teacher be if we all work hard? -....", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/12/3/635216609803717129_Audio.mp3"), options: ["Satisfied", "Happy", "Energized", "Easy-going"], correctAnswer: "Energized", explanation: "Nghe audio: Energized (Tràn đầy năng lượng)." },
  { id: 2, type: QuestionType.FILL_IN_BLANK, questionText: "Choosing a career is one of the biggest _ _ _ _ _ _ _ _ _ we make in life.", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2017/4/14/636277593909476148_Audio.mp3"), correctAnswer: "decisions", explanation: "Nghe audio: Decisions (Quyết định)." },
  { id: 3, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["The Browns", "have a party.", "have bought,", "because they are going to", "a lot of food"], correctAnswer: "The Browns have bought a lot of food because they are going to have a party.", explanation: "Dịch: Gia đình Brown đã mua rất nhiều thức ăn vì họ sắp tổ chức tiệc." },
  { id: 4, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["rich", "with a", "history.", "a country", "Scotland is", "cultural"], correctAnswer: "Scotland is a country with a rich cultural history.", explanation: "Dịch: Scotland là một đất nước có lịch sử văn hóa phong phú." },
  { id: 5, type: QuestionType.FILL_IN_BLANK, questionText: "The child always should keep his hands _ _ _ face clean.", correctAnswer: "and", explanation: "Hands and face (Tay và mặt)." },
  { id: 6, type: QuestionType.MULTIPLE_CHOICE, questionText: "The ... is due to take off at midnight.", options: ["aircraft", "airline", "airmail", "airport"], correctAnswer: "aircraft", explanation: "Aircraft (Máy bay)." },
  { id: 7, type: QuestionType.MULTIPLE_CHOICE, questionText: "“Why are you ... such hurry?” - “I'm missing the last train.", options: ["in", "with", "by", "on"], correctAnswer: "in", explanation: "In such hurry (Đang vội)." },
  { id: 8, type: QuestionType.MULTIPLE_CHOICE, questionText: "Her ... to learn maths is amazing.", options: ["possibility", "ability", "able", "possible"], correctAnswer: "ability", explanation: "Ability (Khả năng)." },
  { id: 9, type: QuestionType.FILL_IN_BLANK, questionText: "Workers were kept in the _ _ _ _ about the plans to sell the company.", correctAnswer: "dark", explanation: "Kept in the dark (Bị giữ bí mật/không được biết)." },
  { id: 10, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["Mekong delta", "last year", "in the", "The flood", "was disastrous."], correctAnswer: "The flood in the Mekong delta last year was disastrous.", explanation: "Dịch: Trận lụt ở đồng bằng sông Cửu Long năm ngoái thật thảm khốc." },
  { id: 11, type: QuestionType.MULTIPLE_CHOICE, questionText: "... different in character we are, we have been mutual friends since our childhood.", options: ["However", "Despite being", "Although", "Whatever"], correctAnswer: "However", explanation: "However + adj/adv + S + V (Dù ... thế nào đi nữa)." },
  { id: 12, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["began as", "of Korean food,", "a child at", "home in the US.", "Her love"], correctAnswer: "Her love of Korean food began as a child at home in the US.", explanation: "Dịch: Tình yêu món ăn Hàn Quốc của cô ấy bắt đầu từ khi còn nhỏ ở Mỹ." },
  { id: 13, type: QuestionType.MULTIPLE_CHOICE, questionText: "A short part of a film or movie that is shown separately is called a ....", options: ["picture", "clip", "news", "cartoon"], correctAnswer: "clip", explanation: "Clip (Đoạn phim ngắn)." },
  { id: 14, type: QuestionType.FILL_IN_BLANK, questionText: "I'll return Bob's pen to him the next _ _ _ _ I see him.", correctAnswer: "time", explanation: "The next time (Lần tới)." },
  { id: 15, type: QuestionType.FILL_IN_BLANK, questionText: "Teachers, for instance, often blog to help students to _ _ _ _ _ up when they miss a class.", correctAnswer: "catch", explanation: "Catch up (Bắt kịp)." },
  { id: 16, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["astronomy was", "by the Greeks", "of the 5th century BC.", "a great innovation", "Mathematical"], correctAnswer: "Mathematical astronomy was a great innovation by the Greeks of the 5th century BC.", explanation: "Dịch: Thiên văn học toán học là một sự đổi mới vĩ đại..." },
  { id: 17, type: QuestionType.MULTIPLE_CHOICE, questionText: "Mrs Ramsay was accustomed ... in this rickety house.", options: ["by living", "to living", "with living", "living"], correctAnswer: "to living", explanation: "Accustomed to + V-ing (Quen với)." },
  { id: 18, type: QuestionType.FILL_IN_BLANK, questionText: "Margaret is a good _ _ _ _ _ _ who can type 60 words per minute.", correctAnswer: "typist", explanation: "Typist (Người đánh máy)." },
  { id: 19, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["the overall economy.", "is an important", "matter of any country.", "Unemployment", "because it impacts"], correctAnswer: "Unemployment is an important matter of any country because it impacts the overall economy.", explanation: "Dịch: Thất nghiệp là vấn đề quan trọng..." },
  { id: 20, type: QuestionType.FILL_IN_BLANK, questionText: "In Japan, primary school pupils often _ _ _ _ off their shoes when they come in the class rooms and put on slippers.", correctAnswer: "take", explanation: "Take off (Cởi ra)." },
  { id: 21, type: QuestionType.MULTIPLE_CHOICE, questionText: "The building ... he lives ... is very old.", options: ["which / in", "that/ within", "where/ in", "where/ on"], correctAnswer: "which / in", explanation: "Which he lives in (Nơi anh ấy sống trong đó - 'where' không đi với giới từ 'in' ở cuối)." },
  { id: 22, type: QuestionType.MULTIPLE_CHOICE, questionText: "“I have passed all my examinations”. - ...", options: ["My dear!", "Best wishes!", "Well done!", "That’s very well!"], correctAnswer: "Well done!", explanation: "Well done! (Làm tốt lắm!)." },
  { id: 23, type: QuestionType.MULTIPLE_CHOICE, questionText: "The rich ... not always happier than the poor.", options: ["is", "are", "be", "must"], correctAnswer: "are", explanation: "The rich (Những người giàu - số nhiều) -> are." },
  { id: 24, type: QuestionType.FILL_IN_BLANK, questionText: "Since oil is an irreplaceable natural resource, we must do whatever we can in order to _ _ _ _ _ _ _ _ it.", correctAnswer: "conserve", explanation: "Conserve (Bảo tồn/Tiết kiệm)." },
  { id: 25, type: QuestionType.FILL_IN_BLANK, questionText: "American spend more than 70 billion on computer games each year, or in other _ _ _ _ _ , they buy two games per household.", correctAnswer: "words", explanation: "In other words (Nói cách khác)." },
  { id: 26, type: QuestionType.MULTIPLE_CHOICE, questionText: "Choose the word whose underlined part is pronounced differently from others:", options: ["organisation", "picture", "suggestion", "question"], correctAnswer: "organisation", explanation: "'Organisation' (/z/ hoặc /s/ tùy giọng), các từ còn lại chứa âm /tʃ/." },
  { id: 27, type: QuestionType.FILL_IN_BLANK, questionText: "I don't m_ _ _ waiting for you.", correctAnswer: "ind", explanation: "Mind waiting (Phiền khi chờ)." },
  { id: 28, type: QuestionType.MULTIPLE_CHOICE, questionText: "What will tourists take in their tour? -....", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/12/3/635216775229839685_Audio.mp3"), options: ["A boat trip along the sea", "A boat trip along rivers", "A boat trip along canals", "A boat trip around the island"], correctAnswer: "A boat trip along canals", explanation: "Nghe audio." },
  { id: 29, type: QuestionType.FILL_IN_BLANK, questionText: "The past participle of \"speak\" is \"_ _ _ _ _ _ \".", correctAnswer: "spoken", explanation: "Speak - Spoke - Spoken." },
  { id: 30, type: QuestionType.FILL_IN_BLANK, questionText: "The Mekong Delta has seen a total of 33.000 hectares of rice fields damaged and nearly 70.000 households suffer from l_ _ _ of water.", correctAnswer: "ack", explanation: "Lack of water (Thiếu nước)." },
  { id: 31, type: QuestionType.MULTIPLE_CHOICE, questionText: "We couldn’t afford that house because it....", options: ["was over my head", "paid through the nose", "cost an arm and a leg", "blew my own trumpet"], correctAnswer: "cost an arm and a leg", explanation: "Cost an arm and a leg (Rất đắt đỏ)." },
  { id: 32, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["100 feet and 150 tons.", "that has ever lived.", "considered the largest animal", "It can grow to", "The blue whale is"], correctAnswer: "The blue whale is considered the largest animal that has ever lived. It can grow to 100 feet and 150 tons.", explanation: "Dịch: Cá voi xanh được coi là loài động vật lớn nhất từng sống..." },
  { id: 33, type: QuestionType.FILL_IN_BLANK, questionText: "His mother asked him to _ _ _ the table for the evening meal.", imageUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2014/4/25/635340435080812041_566X320.jpg"), correctAnswer: "lay", explanation: "Lay the table (Dọn bàn ăn)." },
  { id: 34, type: QuestionType.FILL_IN_BLANK, questionText: "Despite living in the same street, we hardly _ _ _ _ see each other.", correctAnswer: "ever", explanation: "Hardly ever (Hầu như không bao giờ)." },
  { id: 35, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["where", "from 1960 to 1970.", "Braham Grammar school", "I'm the headmaster of", "you studied"], correctAnswer: "I'm the headmaster of Braham Grammar school where you studied from 1960 to 1970.", explanation: "Dịch: Tôi là hiệu trưởng trường Braham nơi bạn đã học..." },
  { id: 36, type: QuestionType.FILL_IN_BLANK, questionText: "As you listen, please note _ _ _ _ important ideas.", correctAnswer: "down", explanation: "Note down (Ghi chép lại)." },
  { id: 37, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["You", "ought to wear", "a motorbike.", "when you drive", "a safety helmet"], correctAnswer: "You ought to wear a safety helmet when you drive a motorbike.", explanation: "Dịch: Bạn nên đội mũ bảo hiểm khi đi xe máy." },
  { id: 38, type: QuestionType.FILL_IN_BLANK, questionText: "What percentage of waste paper is recycled every year? A_ _ _ _ sixty percent.", correctAnswer: "bout", explanation: "About (Khoảng)." },
  { id: 39, type: QuestionType.FILL_IN_BLANK, questionText: "_ _ _ _ _ _ _ global solidarity, the world would not be better prepared for the influenza H1N1 pandemic.", correctAnswer: "Without", explanation: "Without (Nếu không có)." },
  { id: 40, type: QuestionType.FILL_IN_BLANK, questionText: "How o_ _ _ _ do you have an English lesson? - Three times a week.", correctAnswer: "ften", explanation: "How often (Bao lâu một lần)." },
  { id: 41, type: QuestionType.FILL_IN_BLANK, questionText: "Bog is a _ _ _ _ person to whom one can talk about anything.", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2014/4/25/635340142570251025_Audio.mp3"), correctAnswer: "nice", explanation: "Nghe audio: Nice (Tốt bụng)." },
  { id: 42, type: QuestionType.MULTIPLE_CHOICE, questionText: "Anti-terrorism forces were ... full alert during the Olympic Games.", options: ["in", "on", "under", "at"], correctAnswer: "on", explanation: "On full alert (Trong tình trạng cảnh giác cao độ)." },
  { id: 43, type: QuestionType.MULTIPLE_CHOICE, questionText: "How can viewers ask questions about the show? -....", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2015/4/9/635641977613967469_Audio.mp3"), options: ["By asking the show's controllers", "By using their remote controls", "By writing questions on the control sheets", "By sending questions by their phones"], correctAnswer: "By using their remote controls", explanation: "Nghe audio." },
  { id: 44, type: QuestionType.FILL_IN_BLANK, questionText: "The trip was short; ho_ _ _ _ _ , we enjoyed it very much.", correctAnswer: "wever", explanation: "However (Tuy nhiên)." },
  { id: 45, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["are my classmates.", "take part in the", "art competitions", "who will", "The girl"], correctAnswer: "The girl who will take part in the art competitions are my classmates.", explanation: "Dịch: Cô gái sẽ tham gia cuộc thi nghệ thuật là bạn cùng lớp của tôi." },
  { id: 46, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["you find a place", "Seldom", "is not polluted.", "that", "do"], correctAnswer: "Seldom do you find a place that is not polluted.", explanation: "Dịch: Hiếm khi bạn tìm thấy một nơi không bị ô nhiễm." },
  { id: 47, type: QuestionType.MULTIPLE_CHOICE, questionText: "One step beyond automated machines is the robot, the heart and brain ... which is the microcomputer.", options: ["in", "on", "of", "with"], correctAnswer: "of", explanation: "Of which (Của nó - mệnh đề quan hệ)." },
  { id: 48, type: QuestionType.FILL_IN_BLANK, questionText: "A clown is a person who always has a fun_ _ painted face at a circus.", correctAnswer: "ny", explanation: "Funny (Hài hước)." },
  { id: 49, type: QuestionType.FILL_IN_BLANK, questionText: "Linda studies very hard. _ _ _ _ _ _ _ , she always gets bad marks.", correctAnswer: "However", explanation: "However (Tuy nhiên)." },
  { id: 50, type: QuestionType.MULTIPLE_CHOICE, questionText: "Choose the word that has the underlined part pronounced differently.", options: ["tidal", "device", "mineral", "sight"], correctAnswer: "mineral", explanation: "'Mineral' (/i/), các từ còn lại (/ai/)." },
  { id: 51, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["this summer.", "are going to", "The boys", "and girls", "the seaside"], correctAnswer: "The boys and girls are going to the seaside this summer.", explanation: "Dịch: Các chàng trai và cô gái sẽ đi biển mùa hè này." },
  { id: 52, type: QuestionType.FILL_IN_BLANK, questionText: "Now the holiday is _ _ _ _ for this summer and we re back at the office.", correctAnswer: "over", explanation: "Over (Kết thúc)." },
  { id: 53, type: QuestionType.MULTIPLE_CHOICE, questionText: "The house was burgled while the family was... in a card game.", options: ["absorbed", "entertained", "buried", "busy"], correctAnswer: "absorbed", explanation: "Absorbed in (Mải mê)." },
  { id: 54, type: QuestionType.FILL_IN_BLANK, questionText: "Friendship is a two-side a_ _ _ _ _ .", correctAnswer: "ffair", explanation: "Affair (Vấn đề/Chuyện)." },
  { id: 55, type: QuestionType.MULTIPLE_CHOICE, questionText: "Choose the word that has different stress pattern:", options: ["abroad", "aircraft", "balloon", "despite"], correctAnswer: "aircraft", explanation: "'Aircraft' nhấn âm 1. Các từ còn lại nhấn âm 2." },
  { id: 56, type: QuestionType.MULTIPLE_CHOICE, questionText: "How long had they lived in Hanoi?", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2015/1/9/635563954084610271_Audio.mp3"), options: ["for 3 years", "for 5 years", "for 9 years", "for 10 years"], correctAnswer: "for 10 years", explanation: "Nghe audio." },
  { id: 57, type: QuestionType.MULTIPLE_CHOICE, questionText: "You thought I did wrong but the results ... my action.", options: ["justified", "agreed", "approved", "proved"], correctAnswer: "justified", explanation: "Justified (Biện minh/Chứng minh là đúng)." },
  { id: 58, type: QuestionType.FILL_IN_BLANK, questionText: "Had it not been _ _ _ Mom's help, I could not have held a big party.", correctAnswer: "for", explanation: "Had it not been for (Nếu không có)." },
  { id: 59, type: QuestionType.MULTIPLE_CHOICE, questionText: "The planet which is ... to the earth is Venus.", options: ["closed", "closest", "closing", "closes"], correctAnswer: "closest", explanation: "Closest (Gần nhất)." },
  { id: 60, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["Japanese word", "“Tsunami”", "is a", "“harbor wave.”", "which means"], correctAnswer: "“Tsunami” is a Japanese word which means “harbor wave.”", explanation: "Dịch: Tsunami là từ tiếng Nhật có nghĩa là sóng cảng." },
  { id: 61, type: QuestionType.MULTIPLE_CHOICE, questionText: "I have a very bad ... for names.", options: ["imagination", "memory", "mind", "thought"], correctAnswer: "memory", explanation: "Memory (Trí nhớ)." },
  { id: 62, type: QuestionType.FILL_IN_BLANK, questionText: "You can avoid _ _ _ _ _ decay by brushing your teeth regularly.", correctAnswer: "tooth", explanation: "Tooth decay (Sâu răng)." },
  { id: 63, type: QuestionType.FILL_IN_BLANK, questionText: "No decision _ _ _ _ _ _ _ _ _ _ _ _ until now.", correctAnswer: "has been made", explanation: "Has been made (Vẫn chưa được đưa ra - bị động)." },
  { id: 64, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["and everyone", "with the harvest.", "yielded a good crop,", "was extremely happy", "The field"], correctAnswer: "The field yielded a good crop, and everyone was extremely happy with the harvest.", explanation: "Dịch: Cánh đồng được mùa và mọi người đều vui mừng." },
  { id: 65, type: QuestionType.MULTIPLE_CHOICE, questionText: "Please ... your hand if you want to ask the teacher a question.", options: ["rise", "push", "raise", "lift"], correctAnswer: "raise", explanation: "Raise your hand (Giơ tay)." },
  { id: 66, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["saying that", "be learnt", "English cannot", "It goes without", "overnight."], correctAnswer: "It goes without saying that English cannot be learnt overnight.", explanation: "Dịch: Không cần phải nói rằng tiếng Anh không thể học trong một sớm một chiều." },
  { id: 67, type: QuestionType.FILL_IN_BLANK, questionText: "She felt a sense of _ _ _ _ when her best friend went to live abroad.", correctAnswer: "loss", explanation: "Sense of loss (Cảm giác mất mát)." },
  { id: 68, type: QuestionType.FILL_IN_BLANK, questionText: "They used to live in the big _ _ _ house in town.", correctAnswer: "old", explanation: "Big old house (Ngôi nhà lớn cũ)." },
  { id: 69, type: QuestionType.FILL_IN_BLANK, questionText: "Another reason to cause species _ _ _ _ _ _ _ _ _ _ is over-exploitation.", correctAnswer: "extinction", explanation: "Extinction (Sự tuyệt chủng)." },
  { id: 70, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["on the building.", "on the Capital Trade Centre was", "the 11-9 attack", "The terrorists attack", "a carbon copy of"], correctAnswer: "The terrorists attack on the Capital Trade Centre was a carbon copy of the 11-9 attack on the building.", explanation: "Dịch: Vụ tấn công khủng bố..." },
  { id: 71, type: QuestionType.MULTIPLE_CHOICE, questionText: "Computer bulletin boards are used in the same way as ... ones in schools and colleges.", options: ["formerly", "traditional", "old time", "newly"], correctAnswer: "traditional", explanation: "Traditional ones (Những cái truyền thống)." },
  { id: 72, type: QuestionType.FILL_IN_BLANK, questionText: "I hope we won’t lose _ _ _ _ _ with each other when the course finishes.", correctAnswer: "touch", explanation: "Lose touch (Mất liên lạc)." },
  { id: 73, type: QuestionType.MULTIPLE_CHOICE, questionText: "Which sentence is correct?", imageUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/Thi_cac_cap/2019-2020/Quoc%20Gia/L9/Anh/57.jpg"), options: ["You should book a tour in advance if you go to the Safari Wildlife Park at Christmas.", "You can go to the Safari Wildlife Park in the Summer Holidays.", "The Wildlife Safari Park is open all year round.", "You can get more information about the park by giving them a call."], correctAnswer: "The Wildlife Safari Park is open all year round.", explanation: "Thông tin trong hình: Open all year round." },
  { id: 74, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["company is as", "as he is.", "in Tom’s", "No one", "good at programming"], correctAnswer: "No one in Tom’s company is as good at programming as he is.", explanation: "Dịch: Không ai trong công ty Tom giỏi lập trình bằng anh ấy." },
  { id: 75, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["for candy", "to house asking", "Most children", "or fruit.", "go from house"], correctAnswer: "Most children go from house to house asking for candy or fruit.", explanation: "Dịch: Hầu hết trẻ em đi từ nhà này sang nhà khác xin kẹo hoặc trái cây." },
  { id: 76, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["too have resisted government requests", "their freedom.", "to share cars because it is", "Americans,", "less convenient and restricts"], correctAnswer: "Americans, too have resisted government requests to share cars because it is less convenient and restricts their freedom.", explanation: "Dịch: Người Mỹ cũng phản đối..." },
  { id: 77, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["A natural", "disaster is", "when a natural", "event affects humans.", "the consequence"], correctAnswer: "A natural disaster is the consequence when a natural event affects humans.", explanation: "Dịch: Thảm họa thiên nhiên là hậu quả..." },
  { id: 78, type: QuestionType.MULTIPLE_CHOICE, questionText: "How often do the windows need cleaning?", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2015/1/9/635563954702527356_Audio.mp3"), options: ["once a year", "twice a year", "once a month", "twice a month"], correctAnswer: "twice a year", explanation: "Nghe audio." },
  { id: 79, type: QuestionType.FILL_IN_BLANK, questionText: "Those whose are easily influenced by r_ _ _ _ _ can be never be good friends.", correctAnswer: "umors", explanation: "Rumors (Tin đồn)." },
  { id: 80, type: QuestionType.FILL_IN_BLANK, questionText: "You are not allowed to camp here _ _ _ _ _ _ _ permission.", correctAnswer: "without", explanation: "Without permission (Không có sự cho phép)." },
  { id: 81, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["for", "are", "recycling.", "collected.", "Waste paper and bottles"], correctAnswer: "Waste paper and bottles are collected for recycling.", explanation: "Dịch: Giấy vụn và chai lọ được thu gom để tái chế." },
  { id: 82, type: QuestionType.FILL_IN_BLANK, questionText: "Unless you understand the lesson, I will _ _ _ _ _ _ _ it again to you.", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2015/4/9/635641980291098172_Audio.mp3"), correctAnswer: "explain", explanation: "Nghe audio: Explain (Giải thích)." },
  { id: 83, type: QuestionType.FILL_IN_BLANK, questionText: "The teacher made her students do the exercises over and over _ _ _ _ _ .", correctAnswer: "again", explanation: "Over and over again (Lặp đi lặp lại)." },
  { id: 84, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["with someone", "symptoms", "Avoid", "of coronavirus.", "who is displaying", "contact"], correctAnswer: "Avoid contact with someone who is displaying symptoms of coronavirus.", explanation: "Dịch: Tránh tiếp xúc với người có triệu chứng nhiễm virus corona." },
  { id: 85, type: QuestionType.FILL_IN_BLANK, questionText: "He doesn’t like to wait _ _ _ _ _ the last moment to do something.", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2016/4/8/635956752947536661_Audio.mp3"), correctAnswer: "until", explanation: "Nghe audio: Until (Cho đến tận)." },
  { id: 86, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["topics and special news", "articles in various categories.", "Presently", "a few hundred", "there are"], correctAnswer: "Presently there are a few hundred topics and special news articles in various categories.", explanation: "Dịch: Hiện nay có vài trăm chủ đề..." },
  { id: 87, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["left the Moon", "Apolo 11", "to the Earth", "and returned", "on July 21st."], correctAnswer: "Apolo 11 left the Moon and returned to the Earth on July 21st.", explanation: "Dịch: Apollo 11 rời Mặt Trăng và trở về Trái Đất..." },
  { id: 88, type: QuestionType.MULTIPLE_CHOICE, questionText: "The new shopping mall is advertised as a place ... you can find just about anything you might want to buy.", options: ["where", "which", "in where", "in that"], correctAnswer: "where", explanation: "Where = In which (Nơi mà)." },
  { id: 89, type: QuestionType.MULTIPLE_CHOICE, questionText: "I... this book to all who enjoy an exciting story.", options: ["recommend", "approve of", "compliment", "praise"], correctAnswer: "recommend", explanation: "Recommend (Giới thiệu/Khuyên đọc)." },
  { id: 90, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["wonder if they ’re", "losing something.", "of the young athletes,", "but we also", "We admire", "the talent and dedication"], correctAnswer: "We admire the talent and dedication of the young athletes, but we also wonder if they ’re losing something.", explanation: "Dịch: Chúng tôi ngưỡng mộ tài năng..." },
  { id: 91, type: QuestionType.FILL_IN_BLANK, questionText: "Vietnamese people believe that the first person through the door on New Year’s Day brings _ _ _ _ _ _ good or bad luck.", correctAnswer: "either", explanation: "Either... or (Hoặc... hoặc)." },
  { id: 92, type: QuestionType.MULTIPLE_CHOICE, questionText: "How long does it take to drive from London to Edinburgh? -....", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2014/4/24/635339737421751393_Audio.mp3"), options: ["One hour", "Three hours", "Six hours", "Nine hours"], correctAnswer: "Nine hours", explanation: "Nghe audio." },
  { id: 93, type: QuestionType.FILL_IN_BLANK, questionText: "People used to think that heavy things always fell faster _ _ _ _ light things.", correctAnswer: "than", explanation: "Faster than (Nhanh hơn)." },
  { id: 94, type: QuestionType.MULTIPLE_CHOICE, questionText: "Can we trust you ... John the message?", options: ["give", "to give", "giving", "of giving"], correctAnswer: "to give", explanation: "Trust sb to do sth (Tin tưởng ai làm gì)." },
  { id: 95, type: QuestionType.FILL_IN_BLANK, questionText: "The traffic in the city is c_ _ _ _ _ _ _ _ _ especially in rush hours.", correctAnswer: "ongested", explanation: "Congested (Tắc nghẽn)." },
  { id: 96, type: QuestionType.FILL_IN_BLANK, questionText: "Braille invented a system of reading for the bl_ _ d.", correctAnswer: "in", explanation: "Blind (Người mù)." },
  { id: 97, type: QuestionType.FILL_IN_BLANK, questionText: "Another way to reduce waste is to buy high _ _ _ _ _ _ _ products.", correctAnswer: "quality", explanation: "High quality (Chất lượng cao)." },
  { id: 98, type: QuestionType.MULTIPLE_CHOICE, questionText: "I was working on the computer when the fire ... out.", options: ["broke", "broken", "breaking", "had been broken"], correctAnswer: "broke", explanation: "Broke out (Bùng phát - quá khứ đơn)." },
  { id: 99, type: QuestionType.MULTIPLE_CHOICE, questionText: "He asked her ....", options: ["what day was it", "what day it was", "it was what day", "what was the day"], correctAnswer: "what day it was", explanation: "Câu tường thuật: Từ để hỏi + S + V." },
  { id: 100, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["the concert.", "the proceeds of", "The fund-raisers", "haven't officially decided", "where to send"], correctAnswer: "The fund-raisers haven't officially decided where to send the proceeds of the concert.", explanation: "Dịch: Những người gây quỹ chưa quyết định chính thức..." },
  { id: 101, type: QuestionType.FILL_IN_BLANK, questionText: "I am taking my driving test today. Good _ _ _ _ !", correctAnswer: "luck", explanation: "Good luck (Chúc may mắn)." },
  { id: 102, type: QuestionType.FILL_IN_BLANK, questionText: "After lunch, I usually t_ _ e an hour's rest.", correctAnswer: "ak", explanation: "Take a rest (Nghỉ ngơi)." },
  { id: 103, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["from Nga in", "I borrowed", "some new words.", "order to look up", "the dictionary"], correctAnswer: "I borrowed the dictionary from Nga in order to look up some new words.", explanation: "Dịch: Tôi mượn từ điển của Nga để tra từ mới." },
  { id: 104, type: QuestionType.MULTIPLE_CHOICE, questionText: "Most of... archaeologists know about prehistoric cultures is based on studies of material remains.", options: ["these", "what", "which", "then"], correctAnswer: "what", explanation: "What (Những gì mà...)." },
  { id: 105, type: QuestionType.MULTIPLE_CHOICE, questionText: "Why is it difficult to sleep well on the moon? -....", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2014/4/24/635339741401942384_Audio.mp3"), options: ["Because there’s no air on the moon", "Because one day there lasts for two weeks", "Because there's too much caffeine on the moon", "Because humans don’t sleep on the moon"], correctAnswer: "Because one day there lasts for two weeks", explanation: "Nghe audio." },
  { id: 106, type: QuestionType.MULTIPLE_CHOICE, questionText: "Last year the potato harvest was very disappointing, but this year it looks as though we shall have a better ....", options: ["product", "outcome", "amount", "crop"], correctAnswer: "crop", explanation: "Crop (Vụ mùa)." },
  { id: 107, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["her", "You shouldn’t", "tell", "the secret.", "about"], correctAnswer: "You shouldn’t tell her about the secret.", explanation: "Dịch: Bạn không nên nói với cô ấy về bí mật đó." },
  { id: 108, type: QuestionType.FILL_IN_BLANK, questionText: "_ _ _ _ _ _ _ _ _ _ carry things like bandages and drugs that can be used to treat patients on the way to hospital.", imageUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2019/4/1/636897172604572651_566X320.jpg"), correctAnswer: "Ambulances", explanation: "Dịch: Xe cứu thương. Ambulances." },
  { id: 109, type: QuestionType.FILL_IN_BLANK, questionText: "There is a strong _ _ _ _ _ _ _ _ _ _ _ that language conflict will lead to political conflict if one linguistic group blocks the social mobility of another.", correctAnswer: "possibility", explanation: "Strong possibility (Khả năng cao)." },
  { id: 110, type: QuestionType.FILL_IN_BLANK, questionText: "Early people were _ _ _ _ _ _ - they didn't live in one place.", correctAnswer: "nomads", explanation: "Nomads (Dân du mục)." },
  { id: 111, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["happened yesterday.", "what", "It won't", "happen again.", "I'm sorry about"], correctAnswer: "I'm sorry about what happened yesterday. It won't happen again.", explanation: "Dịch: Tôi xin lỗi về chuyện hôm qua..." },
  { id: 112, type: QuestionType.FILL_IN_BLANK, questionText: "We rode our bicycles to the country _ _ _ _ for pleasure at weekends.", correctAnswer: "just", explanation: "Just for pleasure (Chỉ để giải trí)." },
  { id: 113, type: QuestionType.FILL_IN_BLANK, questionText: "Mobile communications, already highly advanced _ _ _ _ _ _ _ _ with a decade ago, will completely change communications in the next few years.", correctAnswer: "compared", explanation: "Compared with (So với)." },
  { id: 114, type: QuestionType.MULTIPLE_CHOICE, questionText: "I'm going to catch my bus at ... .", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2016/4/8/635957334689616482_Audio.mp3"), options: ["3:40", "4:20", "12:04", "4:30"], correctAnswer: "3:40", explanation: "Nghe audio." },
  { id: 115, type: QuestionType.MULTIPLE_CHOICE, questionText: "People in the United States and Canada celebrate the harvest at....", options: ["Easter", "Halloween", "Christmas", "Thanksgiving"], correctAnswer: "Thanksgiving", explanation: "Thanksgiving (Lễ Tạ ơn)." },
  { id: 116, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["to find accommodation", "few hotels in the city", "There are only a", "during the high season.", "so it s hard"], correctAnswer: "There are only a few hotels in the city so it s hard to find accommodation during the high season.", explanation: "Dịch: Chỉ có vài khách sạn..." },
  { id: 117, type: QuestionType.FILL_IN_BLANK, questionText: "The Boston Marathon is _ _ _ _ every year in the USA.", correctAnswer: "held", explanation: "Is held (Được tổ chức)." },
  { id: 118, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["of", "The", "flexibility is a", "characteristic", "basic", "English."], correctAnswer: "The flexibility is a basic characteristic of English.", explanation: "Dịch: Sự linh hoạt là đặc điểm cơ bản của tiếng Anh." },
  { id: 119, type: QuestionType.FILL_IN_BLANK, questionText: "It will take us at _ _ _ _ _ 20 minutes to get to the airport.", correctAnswer: "least", explanation: "At least (Ít nhất)." },
  { id: 120, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["he believe she was all the world to him.", "realized what she had sacrificed", "Not", "until he", "for him. did"], correctAnswer: "Not until he realized what she had sacrificed for him, did he believe she was all the world to him.", explanation: "Dịch: Mãi cho đến khi..." },
  { id: 121, type: QuestionType.FILL_IN_BLANK, questionText: "I couldn't hide my _ _ _ _ _ _ _ _ _ to go back home.", correctAnswer: "eagerness", explanation: "Eagerness (Sự háo hức)." },
  { id: 122, type: QuestionType.MULTIPLE_CHOICE, questionText: "The hills...", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2017/4/14/636277586749348916_Audio.mp3"), options: ["are all along the coast", "are 30 km long", "have a semi-circular shape", "are round"], correctAnswer: "have a semi-circular shape", explanation: "Nghe audio." },
  { id: 123, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["disqualified", "He was", "the winner.", "from the race, and", "another runner became"], correctAnswer: "He was disqualified from the race, and another runner became the winner.", explanation: "Dịch: Anh ấy bị loại khỏi cuộc đua..." },
  { id: 124, type: QuestionType.MULTIPLE_CHOICE, questionText: "What is the one thing the girl wants to eat while they are reading?", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2016/4/8/635957337523543810_Audio.mp3"), options: ["Cookies", "Ice-cream", "Bananas", "Lollipops"], correctAnswer: "Cookies", explanation: "Nghe audio." },
  { id: 125, type: QuestionType.MULTIPLE_CHOICE, questionText: "What small solar lighting systems would allow the school to do? -....", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2014/1/7/635246843644925252_Audio.mp3"), options: ["To run listening classes for adults", "To run literacy classes for adult", "To run literacy classes for children", "To run additional classes for adults"], correctAnswer: "To run literacy classes for adult", explanation: "Nghe audio." },
  { id: 126, type: QuestionType.MULTIPLE_CHOICE, questionText: "What do you think of the film we’ve watched? - ...", options: ["I’ve seen better.", "It's a breeze!", "No kidding!", "None of your business!"], correctAnswer: "I’ve seen better.", explanation: "I've seen better (Tôi từng xem phim hay hơn rồi - ý chê phim này không hay lắm)." },
  { id: 127, type: QuestionType.MULTIPLE_CHOICE, questionText: "How long does it take for Earth to rotate on its axis?", options: ["365 days", "366 days", "24 hours", "4 years"], correctAnswer: "24 hours", explanation: "Earth rotate on axis (Trái đất tự quay quanh trục) -> 24 giờ." },
  { id: 128, type: QuestionType.MULTIPLE_CHOICE, questionText: "The invention of the computer has had a great... on our life.", options: ["affect", "change", "impact", "burden"], correctAnswer: "impact", explanation: "Impact on (Tác động lên)." },
  { id: 129, type: QuestionType.MULTIPLE_CHOICE, questionText: "Choose the word that has the underlined part pronounced differently:", options: ["face", "may", "day", "fat"], correctAnswer: "fat", explanation: "'Fat' (/æ/), các từ còn lại (/ei/)." },
  { id: 130, type: QuestionType.MULTIPLE_CHOICE, questionText: "They named their daughter ... their favourite movie star.", options: ["of", "for", "after", "on"], correctAnswer: "after", explanation: "Name after (Đặt tên theo)." },
  { id: 131, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["the gold medals.", "will receive", "The boys", "who are sitting", "in the first row"], correctAnswer: "The boys who are sitting in the first row will receive the gold medals.", explanation: "Dịch: Những cậu bé ngồi hàng đầu sẽ nhận huy chương vàng." },
  { id: 132, type: QuestionType.FILL_IN_BLANK, questionText: "The past form of \"threaten\" is \"_ _ _ _ _ _ _ _ _ _ \".", correctAnswer: "threatened", explanation: "Threatened (Đã đe dọa)." },
  { id: 133, type: QuestionType.FILL_IN_BLANK, questionText: "One of the robbers was _ _ _ _ _ _ _ _ _ by the witnesses as of medium height and about 25.", correctAnswer: "described", explanation: "Described (Được mô tả)." },
  { id: 134, type: QuestionType.FILL_IN_BLANK, questionText: "Earthquakes and floods are _ _ _ _ _ _ _ disasters.", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2016/4/8/635956755432128514_Audio.mp3"), correctAnswer: "natural", explanation: "Nghe audio: Natural disasters (Thảm họa thiên nhiên)." },
  { id: 135, type: QuestionType.MULTIPLE_CHOICE, questionText: "Choose the word that has different stress pattern:", options: ["celebration", "congratulate", "activity", "considerate"], correctAnswer: "celebration", explanation: "'Celebration' nhấn âm 3. Các từ còn lại nhấn âm 2." },
  { id: 136, type: QuestionType.MULTIPLE_CHOICE, questionText: "Many people live in ... of losing control.", options: ["worry", "fright", "fear", "concern"], correctAnswer: "fear", explanation: "In fear of (Trong nỗi sợ hãi)." },
  { id: 137, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["body and your mind", "Exercise improves your", "work place and at home.", "to perform better at the", "and it enables you"], correctAnswer: "Exercise improves your body and your mind and it enables you to perform better at the work place and at home.", explanation: "Dịch: Tập thể dục cải thiện cơ thể và tâm trí..." },
  { id: 138, type: QuestionType.FILL_IN_BLANK, questionText: "His family sent him to a _ _ _ _ _ _ _ _ school.", correctAnswer: "boarding", explanation: "Boarding school (Trường nội trú)." },
  { id: 139, type: QuestionType.MULTIPLE_CHOICE, questionText: "Choose the part that needs correction in the following sentence: \"You should take the raincoat with you in case it will rain hard this afternoon.\"", options: ["should take", "with you", "will rain", "hard"], correctAnswer: "will rain", explanation: "In case + S + V (hiện tại đơn) -> Rains." },
  { id: 140, type: QuestionType.MULTIPLE_CHOICE, questionText: "Modern forecasts try to take the mystery ... meteorology.", options: ["from", "of", "among", "out of"], correctAnswer: "out of", explanation: "Take the mystery out of (Làm sáng tỏ bí ẩn của...)." },
  { id: 141, type: QuestionType.FILL_IN_BLANK, questionText: "The meat and bean group is high _ _ protein.", correctAnswer: "in", explanation: "High in protein (Giàu protein)." },
  { id: 142, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["them", "I last", "bought", "over a week ago.", "some food"], correctAnswer: "I last bought some food for them over a week ago.", explanation: "Dịch: Lần cuối tôi mua thức ăn cho họ là hơn một tuần trước." },
  { id: 143, type: QuestionType.FILL_IN_BLANK, questionText: "This robot is capa_ _ _ of doing almost anything you ask.", correctAnswer: "ble", explanation: "Capable of (Có khả năng)." },
  { id: 144, type: QuestionType.FILL_IN_BLANK, questionText: "I’ve got so much work to do that I don't have much time for recrea_ _ _ _ .", correctAnswer: "tion", explanation: "Recreation (Giải trí)." },
  { id: 145, type: QuestionType.FILL_IN_BLANK, questionText: "Vietnam was under a nationwide social _ _ _ _ _ _ _ _ _ _ order for 15 days, starting from the 1st of April, because of the COVID-19 outbreak.", correctAnswer: "distancing", explanation: "Social distancing (Giãn cách xã hội)." },
  { id: 146, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["The more", "the more", "he grows up,", "he is.", "intelligent"], correctAnswer: "The more he grows up, the more intelligent he is.", explanation: "Dịch: Càng lớn cậu ấy càng thông minh." },
  { id: 147, type: QuestionType.FILL_IN_BLANK, questionText: "He’s on his own now - he'll have to _ _ _ _ _ _ his own canoe.", correctAnswer: "paddle", explanation: "Paddle his own canoe (Tự lực cánh sinh)." },
  { id: 148, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["publicity with", "his speech about", "unmarried mothers.", "He attracted a lot of bad"], correctAnswer: "He attracted a lot of bad publicity with his speech about unmarried mothers.", explanation: "Dịch: Anh ấy thu hút nhiều sự chú ý tiêu cực..." },
  { id: 149, type: QuestionType.MULTIPLE_CHOICE, questionText: "Those ballpoints pens are made in a large ... of colours and styles.", options: ["series", "range", "collection", "network"], correctAnswer: "range", explanation: "Range (Phạm vi/Loại)." },
  { id: 150, type: QuestionType.FILL_IN_BLANK, questionText: "I'll give you five minutes to work out this _ _ _ _ _ _ .", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2016/4/8/635956755193114144_Audio.mp3"), correctAnswer: "puzzle", explanation: "Nghe audio: Puzzle (Câu đố)." },
  { id: 151, type: QuestionType.FILL_IN_BLANK, questionText: "Don't ask me such questions. Mind your _ _ _ business!", correctAnswer: "own", explanation: "Mind your own business (Lo chuyện của bạn đi)." },
  { id: 152, type: QuestionType.FILL_IN_BLANK, questionText: "Spacesuits protect astronauts _ _ _ _ extreme temperature change.", correctAnswer: "from", explanation: "Protect from (Bảo vệ khỏi)." },
  { id: 153, type: QuestionType.FILL_IN_BLANK, questionText: "How _ _ _ _ days per week do you go to school?", correctAnswer: "many", explanation: "How many days." },
  { id: 154, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["have a", "Do you", "costume in national", "your country?"], correctAnswer: "Do you have a national costume in your country?", explanation: "Dịch: Nước bạn có quốc phục không?" },
  { id: 155, type: QuestionType.MULTIPLE_CHOICE, questionText: "He was very’ upset by the ... of his English examination.", options: ["failure", "effect", "success", "result"], correctAnswer: "result", explanation: "Result (Kết quả)." },
  { id: 156, type: QuestionType.MULTIPLE_CHOICE, questionText: "Will is one of those who came ... than I did.", options: ["later", "latter", "at last", "more lately"], correctAnswer: "later", explanation: "Later (Muộn hơn)." },
  { id: 157, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["reached home", "As soon as", "I reached for", "the fridge", "for some water."], correctAnswer: "As soon as I reached home I reached for the fridge for some water.", explanation: "Dịch: Ngay khi về nhà tôi đã tìm nước trong tủ lạnh." },
  { id: 158, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["in human's life", "more and more important", "are becoming", "Computers", "nowadays."], correctAnswer: "Computers are becoming more and more important in human's life nowadays.", explanation: "Dịch: Máy tính ngày càng quan trọng..." },
  { id: 159, type: QuestionType.FILL_IN_BLANK, questionText: "In _ _ _ _ _ of his age, he works as hard as he used to.", correctAnswer: "spite", explanation: "In spite of (Mặc dù)." },
  { id: 160, type: QuestionType.MULTIPLE_CHOICE, questionText: "He ... his arm when he was playing tennis.", options: ["breaks", "has broken", "broken", "broke"], correctAnswer: "broke", explanation: "Quá khứ đơn cắt ngang quá khứ tiếp diễn -> Broke." },
  { id: 161, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["to enter", "a mistake", "the exam.", "Brian for", "It was"], correctAnswer: "It was a mistake for Brian to enter the exam.", explanation: "Dịch: Brian đã sai lầm khi tham gia kỳ thi." },
  { id: 162, type: QuestionType.FILL_IN_BLANK, questionText: "I look forward to hearing from you and receiving good _ _ _ _ from your company.", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2014/4/24/635339743579706209_Audio.mp3"), correctAnswer: "news", explanation: "Nghe audio: News (Tin tức)." },
  { id: 163, type: QuestionType.MULTIPLE_CHOICE, questionText: "- Do you know what the competitors did in the game show?”- “They had to race ... obstacles such as ladders, ropes and nets”.", options: ["past", "over", "through", "above"], correctAnswer: "past", explanation: "Race past (Vượt qua)." },
  { id: 164, type: QuestionType.MULTIPLE_CHOICE, questionText: "The block of flats was destroyed ... an earthquake.", options: ["in", "at", "on", "with"], correctAnswer: "in", explanation: "In an earthquake." },
  { id: 165, type: QuestionType.FILL_IN_BLANK, questionText: "She came back home and didn't say anything, _ _ _ _ _ worried all of us.", correctAnswer: "which", explanation: "Which (Điều mà - mệnh đề quan hệ thay thế cho cả câu trước)." },
  { id: 166, type: QuestionType.FILL_IN_BLANK, questionText: "I couldn’t make coffee for everybody. There weren't _ _ _ _ _ _ cups.", correctAnswer: "enough", explanation: "Enough (Đủ)." },
  { id: 167, type: QuestionType.FILL_IN_BLANK, questionText: "Give the correct form of the word POOR in the following sentence: Many of the children and families were already in _ _ _ _ _ _ _ or in crisis, so now they are reaching a breaking point.", correctAnswer: "poverty", explanation: "Poverty (Sự nghèo đói)." },
  { id: 168, type: QuestionType.MULTIPLE_CHOICE, questionText: "We often ... our house with colorful flowers on New Year's Day.", options: ["design", "create", "decorate", "arrange"], correctAnswer: "decorate", explanation: "Decorate (Trang trí)." },
  { id: 169, type: QuestionType.FILL_IN_BLANK, questionText: "Metals _ _ _ _ _ _ when they are heated.", correctAnswer: "expand", explanation: "Expand (Giãn nở)." },
  { id: 170, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["slight changes", "around the Sun.", "There are", "Earth's orbit", "in the"], correctAnswer: "There are slight changes in the Earth's orbit around the Sun.", explanation: "Dịch: Có những thay đổi nhỏ trong quỹ đạo Trái Đất." },
  { id: 171, type: QuestionType.MULTIPLE_CHOICE, questionText: "What don't animals born in zoos know? -....", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2013/12/3/635216776768626387_Audio.mp3"), options: ["How to get food themselves", "Other animals", "Wild life", "Natural habitat"], correctAnswer: "How to get food themselves", explanation: "Nghe audio." },
  { id: 172, type: QuestionType.FILL_IN_BLANK, questionText: "-Mary: “What’s your city famous ...?” - Thuy: “People admire conical hats made in my city”.", correctAnswer: "for", explanation: "Famous for (Nổi tiếng về)." },
  { id: 173, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["the upper", "In ancient Greece, people having", "as members of", "tattoos were regarded", "classes."], correctAnswer: "In ancient Greece, people having tattoos were regarded as members of the upper classes.", explanation: "Dịch: Ở Hy Lạp cổ đại..." },
  { id: 174, type: QuestionType.MULTIPLE_CHOICE, questionText: "My neighbors.... three small children often make a lot of loud noise, never apologize.", options: ["who", "whom", "whose", "that"], correctAnswer: "whose", explanation: "Whose + noun (Sở hữu)." },
  { id: 175, type: QuestionType.MULTIPLE_CHOICE, questionText: "In 1954. the woman said that she saw two aliens in the ....", options: ["plane", "ship", "craft", "spacecraft"], correctAnswer: "spacecraft", explanation: "Spacecraft (Tàu vũ trụ)." },
  { id: 176, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["Phong's parents", "if it were", "would celebrate", "on Saturday.", "their wedding anniversary"], correctAnswer: "Phong's parents would celebrate their wedding anniversary on Saturday if it were.", explanation: "Dịch: Bố mẹ Phong sẽ tổ chức kỷ niệm nếu nó rơi vào thứ Bảy." },
  { id: 177, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["Some countries", "help their people", "from tourism to", "survive.", "need the money"], correctAnswer: "Some countries need the money from tourism to help their people survive.", explanation: "Dịch: Một số nước cần tiền du lịch để giúp người dân tồn tại." },
  { id: 178, type: QuestionType.FILL_IN_BLANK, questionText: "Toshiko had her car repaired by _ mechanic.", correctAnswer: "a", explanation: "By a mechanic." },
  { id: 179, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["speak Spanish.", "if I could, me", "She asked"], correctAnswer: "She asked me if I could speak Spanish.", explanation: "Dịch: Cô ấy hỏi tôi có nói được tiếng Tây Ban Nha không." },
  { id: 180, type: QuestionType.MULTIPLE_CHOICE, questionText: "How long does the report have to be?", audioUrl: cleanUrl("https://res.ioe.vn/edu/EOlympic/ExamData/ImageExam/2017/4/14/636277585644659366_Audio.mp3"), options: ["1000 words", "1000 - 1500 words", "1500 words", "1500 - 2000 words"], correctAnswer: "1500 - 2000 words", explanation: "Nghe audio." },
  { id: 181, type: QuestionType.MULTIPLE_CHOICE, questionText: "The twins look so much ... their father.", options: ["likely", "alike", "likeness", "like"], correctAnswer: "like", explanation: "Look like (Trông giống)." },
  { id: 182, type: QuestionType.MULTIPLE_CHOICE, questionText: "By the time the fire engines arrived, the house ... to the ground.", options: ["was burned", "has been burned", "had been burned", "should have been burned"], correctAnswer: "had been burned", explanation: "Quá khứ hoàn thành (xảy ra trước một hành động quá khứ khác)." },
  { id: 183, type: QuestionType.MULTIPLE_CHOICE, questionText: "Choose the word whose underlined part is pronounced differently from that of the others:", options: ["rugged", "sacred", "wicked", "belonged"], correctAnswer: "belonged", explanation: "'Belonged' (/d/), các từ còn lại (/id/)." },
  { id: 184, type: QuestionType.MULTIPLE_CHOICE, questionText: "The longest river in the world ... name is Nile river is in Egypt.", options: ["which", "whose", "its", "that"], correctAnswer: "whose", explanation: "Whose name (Tên của nó)." },
  { id: 185, type: QuestionType.FILL_IN_BLANK, questionText: "It was such a long journey _ _ _ _ they were all sleep by the time when they arrived.", correctAnswer: "that", explanation: "Such... that (Quá... đến nỗi)." },
  { id: 186, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["Le Van Tam", "Vietnamese hero.", "the Ammunition Depot with petrol.", "was a little", "who destroyed"], correctAnswer: "Le Van Tam was a little Vietnamese hero who destroyed the Ammunition Depot with petrol.", explanation: "Dịch: Lê Văn Tám là..." },
  { id: 187, type: QuestionType.MULTIPLE_CHOICE, questionText: "Choose the word that has the underlined part pronounced differently from the others:", options: ["noon", "soon", "moon", "good"], correctAnswer: "good", explanation: "'Good' (/ʊ/), các từ còn lại (/u:/)." },
  { id: 188, type: QuestionType.FILL_IN_BLANK, questionText: "_ _ _ _ _ shirts are those without flowers, stripes or pictures on it.", correctAnswer: "Plain", explanation: "Plain shirts (Áo trơn)." },
  { id: 189, type: QuestionType.FILL_IN_BLANK, questionText: "There are several news programmes _ _ VTC1 channels.", correctAnswer: "on", explanation: "On channels." },
  { id: 190, type: QuestionType.FILL_IN_BLANK, questionText: "Wild animals are tamed before they are brought _ _ the circus.", correctAnswer: "to", explanation: "Brought to (Đưa đến)." },
  { id: 191, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["expected to endure.", "monuments because they are incombustible and can be", "Stone and marble", "were chosen for important"], correctAnswer: "Stone and marble were chosen for important monuments because they are incombustible and can be expected to endure.", explanation: "Dịch: Đá và cẩm thạch được chọn..." },
  { id: 192, type: QuestionType.MULTIPLE_CHOICE, questionText: "Choose the word that has the underlined part pronounced differently.", options: ["border", "cyclone", "tornado", "forecast"], correctAnswer: "cyclone", explanation: "'Cyclone' (/əʊ/), các từ còn lại chứa âm /ɔː/." },
  { id: 193, type: QuestionType.FILL_IN_BLANK, questionText: "Receptionist: “Hello. can I help you?” - Tourist: I want to book in _ _ _ a plane ticket.", correctAnswer: "for", explanation: "Book in for (Đặt vé)." },
  { id: 194, type: QuestionType.REARRANGE, questionText: "Sắp xếp câu:", rearrangeParts: ["We can explore", "our oceans", "TV cameras.", "using special", "by"], correctAnswer: "We can explore our oceans by using special TV cameras.", explanation: "Dịch: Chúng ta có thể khám phá đại dương bằng camera đặc biệt." },
  { id: 195, type: QuestionType.MULTIPLE_CHOICE, questionText: "I think there might be a lot of little ... in Mars.", options: ["create", "creation", "creatures", "creative"], correctAnswer: "creatures", explanation: "Creatures (Sinh vật)." }
];

        const Button = ({ children, variant = 'primary', size = 'md', className = '', ...props }) => {
             const baseStyles = "inline-flex items-center justify-center font-bold transition-all duration-200 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm transform active:scale-95";
             const variants = {
                primary: "bg-blue-600 hover:bg-blue-700 text-white shadow-blue-500/30 focus:ring-blue-500",
                secondary: "bg-emerald-500 hover:bg-emerald-600 text-white shadow-emerald-500/30 focus:ring-emerald-500",
                danger: "bg-rose-500 hover:bg-rose-600 text-white shadow-rose-500/30 focus:ring-rose-500",
                outline: "bg-white border-2 border-slate-300 text-slate-600 hover:border-blue-500 hover:text-blue-600"
             };
             const sizes = { sm: "px-4 py-1.5 text-sm", md: "px-6 py-3 text-base", lg: "px-8 py-4 text-lg" };
             return <button className={`${baseStyles} ${variants[variant]} ${sizes[size]} ${className}`} {...props}>{children}</button>;
        };

        const StartScreen = ({ onStart }) => {
            const [name, setName] = useState('');
            const handleSubmit = (e) => { e.preventDefault(); if (name.trim()) onStart(name.trim()); };
            return (
                <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-cyan-500 to-blue-600 p-4">
                    <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center animate-slide-up">
                        <div className="mb-8">
                            <h1 className="text-3xl font-extrabold text-slate-800 mb-2">IOE K9 SỐ: 02</h1>
                            <p className="text-slate-500">Luyện thi tiếng Anh IOE cùng AI Master</p>
                        </div>
                        <form onSubmit={handleSubmit} className="space-y-6">
                            <div className="text-left"><label className="block text-sm font-medium text-slate-700 mb-2">Tên của bạn</label><input type="text" value={name} onChange={(e) => setName(e.target.value)} placeholder="Nhập tên..." className="w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all" required /></div>
                            <Button type="submit" className="w-full" size="lg" disabled={!name.trim()}>Bắt đầu chơi</Button>
                        </form>
                    </div>
                </div>
            );
        };

        const AudioPlayer = ({ src }) => {
            const audioRef = useRef(null);
            const [isPlaying, setIsPlaying] = useState(false);
            const togglePlay = () => { if (audioRef.current) { if (isPlaying) audioRef.current.pause(); else audioRef.current.play(); setIsPlaying(!isPlaying); } };
            return (
                <div className="flex items-center gap-3 bg-slate-100 p-3 rounded-lg border border-slate-200">
                    <button type="button" onClick={togglePlay} className="flex-shrink-0 w-10 h-10 flex items-center justify-center bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors">{isPlaying ? '❚❚' : '▶'}</button>
                    <span className="text-sm font-semibold text-slate-600 uppercase tracking-wide">Nghe câu hỏi</span>
                    <audio ref={audioRef} src={src} onEnded={() => setIsPlaying(false)} className="hidden" />
                </div>
            );
        };

        const QuestionCard = ({ question, onAnswer, isAnswered, userAnswer }) => {
            const [inputVal, setInputVal] = useState('');
            const [selectedParts, setSelectedParts] = useState([]);
            const [showHint, setShowHint] = useState(false);
            const [hintText, setHintText] = useState('');

            useEffect(() => { 
                setInputVal(''); 
                setSelectedParts([]); 
                setShowHint(false);
                setHintText('');
            }, [question.id]);

            const normalize = (str) => str ? str.replace(/[.,!?;:'"]/g, '').replace(/\s+/g, ' ').trim().toLowerCase() : "";
            const isCorrect = () => userAnswer && normalize(userAnswer) === normalize(question.correctAnswer);

            const handleMCSelect = (opt) => !isAnswered && onAnswer(opt);
            const handleInputSubmit = (e) => { e.preventDefault(); if (!isAnswered && inputVal.trim()) onAnswer(inputVal.trim()); };
            const handlePartClick = (part) => { if (!isAnswered) setSelectedParts(prev => prev.includes(part) ? prev.filter(p => p !== part) : [...prev, part]); };
            const handleRearrangeSubmit = () => !isAnswered && selectedParts.length > 0 && onAnswer(selectedParts.join(' '));

            const generateHint = () => {
                if (hintText) return;
                let text = '';
                if (question.type === QuestionType.MULTIPLE_CHOICE) {
                    const wrongOptions = question.options?.filter(opt => opt !== question.correctAnswer) || [];
                    if (wrongOptions.length > 0) {
                         const randomWrong = wrongOptions[Math.floor(Math.random() * wrongOptions.length)];
                         text = `Gợi ý 50/50: Loại bỏ đáp án "${randomWrong}".`;
                    }
                } else if (question.type === QuestionType.FILL_IN_BLANK) {
                     const answer = question.correctAnswer.trim();
                     text = `Từ này có ${answer.length} chữ cái. Bắt đầu bằng "${answer.charAt(0).toUpperCase()}...".`;
                } else {
                     const words = question.correctAnswer.split(' ');
                     const hintPhrase = words.slice(0, Math.max(1, Math.floor(words.length/2))).join(' ');
                     text = `Gợi ý: Câu bắt đầu bằng "${hintPhrase}..."`;
                }
                setHintText(text);
            };

            return (
                <div className="w-full max-w-3xl mx-auto mb-8 animate-fade-in">
                    <div className="bg-white rounded-2xl shadow-xl overflow-hidden border border-slate-100">
                        <div className="bg-slate-50 px-6 py-4 border-b border-slate-100 flex justify-between items-center">
                            <div className="flex items-center gap-3">
                                <span className="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-extrabold uppercase">{question.type.replace(/_/g, ' ')}</span>
                                {!isAnswered && (
                                    <button onClick={() => { generateHint(); setShowHint(!showHint); }} className="px-3 py-1 text-xs font-bold border rounded-full bg-yellow-50 text-yellow-600 border-yellow-200 hover:bg-yellow-100">
                                        {showHint ? 'Ẩn Gợi ý' : 'Gợi ý'}
                                    </button>
                                )}
                            </div>
                            <span className="text-xs font-bold text-slate-300">ID: {question.id}</span>
                        </div>
                        <div className="p-6 sm:p-10">
                            <div className="mb-6 space-y-4">
                                {question.imageUrl && <div className="flex justify-center"><img src={question.imageUrl} className="max-h-72 rounded-lg shadow-md" onError={(e) => e.target.style.display = 'none'} /></div>}
                                {question.audioUrl && <div className="bg-blue-50 p-4 rounded-xl"><AudioPlayer src={question.audioUrl} /></div>}
                            </div>

                            {showHint && !isAnswered && (
                                <div className="mb-6 bg-yellow-50 p-3 rounded-lg text-sm text-yellow-800 border border-yellow-200">
                                    <strong>Gợi ý:</strong> {hintText}
                                </div>
                            )}

                            <h2 className="text-xl sm:text-2xl font-bold text-slate-800 mb-6">{question.questionText}</h2>
                            
                            {question.type === QuestionType.MULTIPLE_CHOICE && (
                                <div className="grid grid-cols-1 gap-3">
                                    {question.options?.map((opt, idx) => (
                                        <button key={idx} onClick={() => handleMCSelect(opt)} disabled={isAnswered} className={`w-full p-4 rounded-xl text-left border-2 transition-all ${isAnswered ? (opt === question.correctAnswer ? 'bg-green-100 border-green-500 text-green-900' : opt === userAnswer ? 'bg-red-100 border-red-500 text-red-900' : 'bg-slate-50 opacity-60') : 'bg-white hover:border-blue-400 hover:shadow-md'}`}>
                                            <span className="font-bold mr-4 w-6 inline-block">{String.fromCharCode(65 + idx)}</span>{opt}
                                        </button>
                                    ))}
                                </div>
                            )}

                            {question.type === QuestionType.FILL_IN_BLANK && (
                                <form onSubmit={handleInputSubmit} className="flex flex-col gap-2">
                                    <div className="flex gap-3">
                                        <input type="text" value={isAnswered ? userAnswer : inputVal} onChange={(e) => setInputVal(e.target.value)} disabled={isAnswered} className={`flex-1 p-4 rounded-xl border-2 text-lg outline-none ${isAnswered ? (isCorrect() ? 'border-green-500 bg-green-50' : 'border-red-500 bg-red-50') : 'border-slate-200 focus:border-blue-500'}`} placeholder="Nhập đáp án..." />
                                        {!isAnswered && <Button type="submit">Trả lời</Button>}
                                    </div>
                                    {!isAnswered && <div className="text-xs text-slate-400 text-right">Đã nhập: {inputVal.length} ký tự</div>}
                                </form>
                            )}

                            {question.type === QuestionType.REARRANGE && (
                                <div className="space-y-6">
                                    <div className="flex flex-wrap gap-3 p-4 bg-slate-50 rounded-xl border shadow-inner min-h-[60px]">
                                        {question.rearrangeParts?.map((part, idx) => (
                                            <button key={idx} onClick={() => handlePartClick(part)} disabled={isAnswered || selectedParts.includes(part)} className={`px-4 py-2 rounded-lg bg-white border shadow-sm transition-all active:scale-95 ${selectedParts.includes(part) ? 'opacity-0 pointer-events-none' : 'hover:border-blue-400'}`}>{part}</button>
                                        ))}
                                    </div>
                                    <div className={`min-h-[80px] p-4 rounded-xl border-2 border-dashed flex flex-wrap gap-2 items-center ${isAnswered ? (isCorrect() ? 'border-green-500 bg-green-50/50' : 'border-red-500 bg-red-50/50') : 'border-slate-300 bg-white'}`}>
                                         {selectedParts.length === 0 && !isAnswered && <div className="w-full text-center text-slate-400 italic">Bấm từ để sắp xếp...</div>}
                                        {selectedParts.map((part, idx) => <button key={idx} onClick={() => handlePartClick(part)} disabled={isAnswered} className="bg-blue-100 text-blue-900 px-3 py-1.5 rounded-lg border border-blue-200 font-medium shadow-sm hover:bg-red-100 hover:text-red-800 transition-colors">{part}</button>)}
                                    </div>
                                    {!isAnswered && <div className="flex justify-end"><Button onClick={handleRearrangeSubmit} disabled={selectedParts.length === 0}>Xác nhận</Button></div>}
                                </div>
                            )}

                            {isAnswered && (
                                <div className={`mt-8 p-6 rounded-xl border-l-4 shadow-sm animate-fade-in ${isCorrect() ? 'bg-green-50 border-green-500' : 'bg-red-50 border-red-500'}`}>
                                    <div className="flex items-start gap-4">
                                        <div className={`w-8 h-8 rounded-full flex items-center justify-center shrink-0 text-white font-bold ${isCorrect() ? 'bg-green-500' : 'bg-red-500'}`}>{isCorrect() ? '✓' : '✕'}</div>
                                        <div>
                                            <h3 className={`font-bold text-xl mb-2 ${isCorrect() ? 'text-green-800' : 'text-red-800'}`}>{isCorrect() ? 'Chính xác!' : 'Chưa chính xác'}</h3>
                                            {!isCorrect() && <div className="mb-2"><span className="text-red-600 font-bold text-sm uppercase">Đáp án đúng:</span> <span className="font-bold text-slate-800">{question.correctAnswer}</span></div>}
                                            <div className="bg-white/60 p-3 rounded-lg text-slate-700 text-sm"><span className="font-bold text-blue-600 block mb-1">Giải thích:</span>{question.explanation}</div>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const QuestionGrid = ({ questions, userAnswers, currentIndex, onJump, onClose }) => {
            const getStatusColor = (q, idx) => {
                const ans = userAnswers.find(a => a.questionId === q.id);
                if (idx === currentIndex) return "ring-2 ring-blue-500 border-blue-500 text-blue-600 bg-white";
                if (!ans) return "bg-slate-100 text-slate-400 border-transparent";
                return ans.isCorrect ? "bg-green-500 text-white border-green-600" : "bg-red-500 text-white border-red-600";
            };
            return (
                <div className="fixed inset-0 z-50 bg-slate-900/50 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in">
                    <div className="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden animate-slide-up">
                        <div className="p-6 border-b flex justify-between items-center bg-slate-50">
                            <div><h2 className="text-xl font-bold">Danh sách câu hỏi</h2><p className="text-sm text-slate-500">Đã làm: {userAnswers.length} / {questions.length}</p></div>
                            <button onClick={onClose} className="p-2 hover:bg-slate-200 rounded-full">✕</button>
                        </div>
                        <div className="flex-1 overflow-y-auto p-6 custom-scrollbar"><div className="grid grid-cols-5 sm:grid-cols-10 gap-3">{questions.map((q, idx) => (<button key={q.id} onClick={() => { onJump(idx); onClose(); }} className={`h-10 w-10 rounded-lg font-bold border transition-all ${getStatusColor(q, idx)}`}>{idx + 1}</button>))}</div></div>
                        <div className="p-4 bg-slate-50 border-t text-xs text-slate-500 flex gap-4 justify-center flex-wrap"><div className="flex items-center gap-2"><span className="w-3 h-3 bg-green-500 rounded-full"></span> Đúng</div><div className="flex items-center gap-2"><span className="w-3 h-3 bg-red-500 rounded-full"></span> Sai</div><div className="flex items-center gap-2"><span className="w-3 h-3 ring-2 ring-blue-500 rounded-full"></span> Đang làm</div><div className="flex items-center gap-2"><span className="w-3 h-3 bg-slate-200 rounded-full"></span> Chưa làm</div></div>
                    </div>
                </div>
            );
        }

        const ResultScreen = ({ userName, userAnswers, onRetryAll, onRetryWrong }) => {
            const correct = userAnswers.filter(a => a.isCorrect).length;
            const total = userAnswers.length;
            const percent = total > 0 ? Math.round((correct/total)*100) : 0;
            const hasWrong = correct < total;
            const score = correct * 10;

            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-4 animate-fade-in bg-slate-50">
                    <div className="bg-white rounded-3xl shadow-xl p-8 max-w-2xl w-full text-center">
                        <div className="mb-6 relative inline-block">
                            <svg className="w-32 h-32 transform -rotate-90" viewBox="0 0 120 120">
                                <circle cx="60" cy="60" r="54" fill="none" stroke="#e2e8f0" strokeWidth="12" />
                                <circle cx="60" cy="60" r="54" fill="none" stroke={percent >= 80 ? '#10b981' : percent >= 50 ? '#3b82f6' : '#ef4444'} strokeWidth="12" strokeDasharray="339.292" strokeDashoffset={339.292 - (339.292 * percent) / 100} className="transition-all duration-1000 ease-out" />
                            </svg>
                            <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-3xl font-bold text-slate-800">{percent}%</div>
                        </div>
                        <h2 className="text-2xl font-bold text-slate-800 mb-2">Hoàn thành bài thi!</h2>
                        <p className="text-slate-600 mb-4">Chúc mừng <b>{userName}</b></p>
                        
                        <div className="mb-8 inline-flex items-baseline gap-2 bg-blue-50 px-6 py-2 rounded-2xl border border-blue-100">
                             <span className="text-4xl font-extrabold text-blue-600">{score}</span>
                             <span className="text-lg text-slate-500 font-bold">điểm</span>
                        </div>

                        <div className="grid grid-cols-2 gap-4 mb-8 bg-slate-50 p-4 rounded-xl">
                            <div><div className="text-2xl font-bold text-green-600">{correct}</div><div className="text-xs uppercase text-slate-500 font-bold">Đúng</div></div>
                            <div className="border-l border-slate-200"><div className="text-2xl font-bold text-red-500">{total - correct}</div><div className="text-xs uppercase text-slate-500 font-bold">Sai</div></div>
                        </div>
                        {hasWrong && (
                            <div className="text-left mb-6 max-h-48 overflow-y-auto custom-scrollbar border-t border-b py-4">
                                <h3 className="text-xs font-bold text-slate-400 uppercase mb-2">Cần xem lại</h3>
                                <div className="space-y-2">
                                    {userAnswers.filter(a => !a.isCorrect).map((ans, i) => {
                                        const q = QUIZ_DATA.find(x => x.id === ans.questionId);
                                        return q ? <div key={i} className="text-sm p-2 bg-red-50 rounded"><span className="font-bold text-red-500 mr-2">#{q.id}</span> {q.questionText} <br/><span className="text-xs text-slate-500">Đáp án: {q.correctAnswer}</span></div> : null;
                                    })}
                                </div>
                            </div>
                        )}
                        <div className="flex gap-4 justify-center">
                            <Button onClick={onRetryAll}>Chơi lại từ đầu</Button>
                            {hasWrong && <Button onClick={onRetryWrong} variant="danger">Làm lại câu sai</Button>}
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [gameState, setGameState] = useState(GameState.START);
            const [userName, setUserName] = useState('');
            const [activeQuestions, setActiveQuestions] = useState([]);
            const [currentIndex, setCurrentIndex] = useState(0);
            const [userAnswers, setUserAnswers] = useState([]);
            const [showGrid, setShowGrid] = useState(false);

            const handleStart = (name) => { setUserName(name); startSession(QUIZ_DATA); };
            const startSession = (questions) => { setActiveQuestions(questions); setCurrentIndex(0); setUserAnswers([]); setGameState(GameState.PLAYING); };
            
            const handleAnswer = (response) => {
                const q = activeQuestions[currentIndex];
                const normalize = (s) => s.replace(/[.,!?;:'"]/g, '').replace(/\s+/g, ' ').trim().toLowerCase();
                const isCorrect = normalize(response) === normalize(q.correctAnswer);
                setUserAnswers(prev => [...prev.filter(a => a.questionId !== q.id), { questionId: q.id, userResponse: response, isCorrect }]);
            };

            const handleNext = () => currentIndex < activeQuestions.length - 1 && setCurrentIndex(prev => prev + 1);
            const handlePrev = () => currentIndex > 0 && setCurrentIndex(prev => prev - 1);
            const handleSkip = () => handleNext();
            const handleFinish = () => setGameState(GameState.FINISHED);
            
            const handleRetryWrong = () => {
                const wrongIds = userAnswers.filter(a => !a.isCorrect).map(a => a.questionId);
                startSession(QUIZ_DATA.filter(q => wrongIds.includes(q.id)));
            };

            if (gameState === GameState.START) return <StartScreen onStart={handleStart} />;
            if (gameState === GameState.FINISHED) return <ResultScreen userName={userName} userAnswers={userAnswers} onRetryAll={() => startSession(QUIZ_DATA)} onRetryWrong={handleRetryWrong} />;

            const currentQ = activeQuestions[currentIndex];
            const answer = userAnswers.find(a => a.questionId === currentQ.id);
            const isAnswered = !!answer;
            const isLast = currentIndex === activeQuestions.length - 1;
            const allAnswered = userAnswers.length === activeQuestions.length;
            
            // Calculate Score: 10 points per correct answer
            const currentScore = userAnswers.filter(a => a.isCorrect).length * 10;

            return (
                <div className="min-h-screen bg-slate-100 flex flex-col items-center py-8 px-4 pb-32 relative">
                    <div className="w-full max-w-3xl flex justify-between items-center mb-6 bg-white p-4 rounded-xl shadow-sm">
                        <div className="flex flex-col"><span className="text-xs font-bold text-slate-400 uppercase">Người chơi</span><span className="font-bold text-slate-700">{userName}</span></div>
                        
                        <div className="flex flex-col items-center px-4 border-l border-r border-slate-100">
                            <span className="text-xs font-bold text-slate-400 uppercase">Điểm số</span>
                            <span className="font-bold text-emerald-600 text-xl">{currentScore}</span>
                        </div>

                        <button onClick={() => setShowGrid(true)} className="flex items-center gap-2 px-3 py-1.5 bg-slate-100 hover:bg-slate-200 rounded-lg text-sm font-bold text-slate-600">Danh sách</button>
                        
                        <div className="flex flex-col items-end"><span className="text-xs font-bold text-slate-400 uppercase">Tiến độ</span><span className="font-bold text-blue-600 text-xl">{currentIndex + 1} <span className="text-slate-400 text-sm">/ {activeQuestions.length}</span></span></div>
                    </div>
                    <div className="w-full max-w-3xl bg-slate-200 rounded-full h-2 mb-8 overflow-hidden"><div className="bg-blue-600 h-full transition-all duration-300 ease-out" style={{ width: `${(userAnswers.length / activeQuestions.length) * 100}%` }}></div></div>
                    
                    <QuestionCard question={currentQ} onAnswer={handleAnswer} isAnswered={isAnswered} userAnswer={answer?.userResponse} />
                    
                    <div className="fixed bottom-0 left-0 right-0 p-4 bg-white border-t shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-10">
                        <div className="w-full max-w-3xl mx-auto flex justify-between items-center gap-4">
                            <Button onClick={handlePrev} variant="outline" disabled={currentIndex === 0} className="w-24">← Trước</Button>
                            <div className="flex-1 flex justify-center gap-3">
                                {isAnswered ? (
                                    <>
                                        {!isLast && <Button onClick={handleNext} size="md" className="shadow-xl shadow-blue-500/20 animate-bounce-short">Câu tiếp theo →</Button>}
                                        <Button onClick={handleFinish} variant={allAnswered ? "secondary" : "danger"}>Nộp bài</Button>
                                    </>
                                ) : <Button onClick={handleSkip} variant="outline" className="text-slate-400 hover:text-slate-600">Bỏ qua</Button>}
                            </div>
                            <Button onClick={handleNext} variant="outline" disabled={isLast} className={`w-24 ${isAnswered ? 'opacity-0 pointer-events-none hidden sm:flex' : ''}`}>Sau →</Button>
                        </div>
                    </div>
                    {showGrid && <QuestionGrid questions={activeQuestions} userAnswers={userAnswers} currentIndex={currentIndex} onJump={setCurrentIndex} onClose={() => setShowGrid(false)} />}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>